
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Play SOAP - Documentation - Using the Play SOAP client</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<meta name="description" content="Play SOAP is an open source module for PlayFramework."/>
		<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
		<link rel="stylesheet" href="stylesheets/normalize.css"/>
		<link rel="stylesheet" href="stylesheets/foundation.min.css"/>
		<link rel="stylesheet" href="stylesheets/main.min.css"/>
		<script type="text/javascript" src="javascripts/vendor/modernizr.min.js"></script>
		<link rel="shortcut icon" href="favicon.ico" />
	</head>
	<body class="home">
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<nav class="tab-bar">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" ><span></span></a>
					</section>
					<section class="middle tab-bar-section">
						<h1 class="title"><a href="./Home.html">Play SOAP Documentation</a></h1><a href="http://www.lightbend.com" class="lightbend-link"><svg id="lightbend-icon-reverse" class="svg-icon svg-icon-lightbend-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 302 262"><title>lightbend-icon</title><g id="icon"><path d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" style="fill:#fff"/><path d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" style="fill:#fff"/></g></svg>
</a>
					</section>
				</nav>
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						
							<li><a href="Home.html">Home</a></li>
						
							<li><a href="SbtWsdl.html">Using sbt WSDL</a></li>
						
							<li><a href="PlaySoapClient.html">Using the Play SOAP client</a></li>
						
							<li><a href="Handlers.html">Using JAX WS Handlers</a></li>
						
							<li><a href="Security.html">Security</a></li>
						
					</ul>
				</aside>
				<div class="row">
					<div class="small-12 large-12 columns">

						<article id="page-content">
							<h1><a href="#using-the-play-soap-client" name="using-the-play-soap-client">Using the Play SOAP client</a></h1>
<h2><a href="#accessing-the-client" name="accessing-the-client">Accessing the client</a></h2>
<p>Once you have sbt WSDL generating a soap client for you, it is quite straightforward to use. How you access it depends on the service and port names in the WSDL. Consider the following service section from a WSDL:</p>
<pre class="prettyprint"><code class="language-xml">  &lt;wsdl:service name=&quot;HelloWorldService&quot;&gt;
    &lt;wsdl:port binding=&quot;tns:HelloWorldSoapBinding&quot; name=&quot;HelloWorld&quot;&gt;
      &lt;soap:address location=&quot;http://example.com/helloWorld&quot;/&gt;
    &lt;/wsdl:port&gt;
  &lt;/wsdl:service&gt;
</code></pre>
<p>Assuming that the package name that the client was generated into is <code>com.example</code>, Play will generate a service class called <code>com.example.HelloWorldService</code>. This class is actually a Play plugin that allows you to configure the client, including configuring the address for each port to use.</p>
<p>Note that there are some situations where sbt WSDL won&rsquo;t use the service name from the WSDL, these are when the name of the service conflicts with another class that it generated, such as the name of the service endpoint interface. In that case, sbt WSDL will append <code>_Service</code> to the end of the service name, for example <code>com.example.HelloWorldService_Service</code>.</p>
<p>Having located the service class, you can now get a port. In the above WSDL there is one port named <code>HelloWorld</code>, and, according to the <code>HelloWorldSoapBinding</code> (not shown above), this returns a service endpoint interface called <code>HelloWorld</code>. To access the endpoint, simply have it injected into your components or controllers, like so in Scala:</p>
<pre class="prettyprint"><code class="language-scala">class MyComponent @Inject() (helloWorldService: HelloWorldService) {
  val client: HelloWorld = helloWorldService.helloWorld
}
</code></pre>
<p>Or in Java:</p>
<pre class="prettyprint"><code class="language-java">public class MyComponent {
  
    private final HelloWorldService helloWorldService;

    @Inject
    public MyComponent(HelloWorldService helloWorldService) {
        this.helloWorldService - helloWorldService;
    }

    public void someMethod() {
        HelloWorld client = helloWorldService.getHelloWorld();
        // use the client somehow
    }
</code></pre>
<h2><a href="#using-the-client" name="using-the-client">Using the client</a></h2>
<p>Once you&rsquo;ve got a reference to the <code>client</code>, you can invoke methods on it. For example, let&rsquo;s assume our client has operation called <code>sayHello</code> that takes a String parameter and returns a String parameter. To invoke this from a Play Scala action, you would do this:</p>
<pre class="prettyprint"><code class="language-scala">import play.api.libs.concurrent.Execution.Implicits._

def hello(name: String) = Action.async {
  val client: HelloWorld = helloWorldService.helloWorld
  client.sayHello(name).map { answer =&gt;
    Ok(answer)
  }
}
</code></pre>
<p>To invoke it from a Play Java action you would do this:</p>
<pre class="prettyprint"><code class="language-java">import java.util.concurrent.CompletionStage;

public CompletionStage&lt;Result&gt; hello(String name) {
    HelloWorld client = helloWorldService.getHelloWorld();
    return client.sayHello(name).map(answer -&gt; {
        return ok(answer);
    });
}
</code></pre>
<h3><a href="#a-note-on-using-scala" name="a-note-on-using-scala">A note on using Scala</a></h3>
<p>The generated data objects will all be Java beans, with getter/setter style properties, and using Java collections. For convenience when working with the Java collections, you may import the Scala implicit conversions for Scala collections, like so:</p>
<pre class="prettyprint"><code class="language-scala">import scala.collection.JavaConverters._
</code></pre>
<p>Using this you can work with Java collections as if they were Scala collections, and pass Scala collections to setters and methods that accept Java collections.</p>
<p>It&rsquo;s also important to remember that many properties could be <code>null</code>.</p>
<p>A pure Scala client that uses case classes, Scala collections and <code>Option</code> is a possible future enhancement for the Play SOAP library.</p>
<h2><a href="#configuring-the-client" name="configuring-the-client">Configuring the client</a></h2>
<p>Configuration for the client works hierarchically, each configuration item is first checked to see if it&rsquo;s defined for the port, if not then for the service, and finally globally. The format for global configuration is <code>play.soap.*</code>. The format for configuration applying to a particular service is <code>play.soap.services.&lt;fqsn&gt;</code>, where <code>&lt;fqsn&gt;</code> is the fully qualified service name, for example, <code>com.example.HelloWorldService</code>. The format for configuration applying to a particular port is <code>play.soap.services.&lt;fqsn&gt;.ports.&lt;portName&gt;</code>, where <code>&lt;portName&gt;</code> is the name of the port, for example <code>HelloWorld</code>.</p>
<p>So for the client above, to set the debug log just for the port, you would set:</p>
<pre class="prettyprint"><code>play.soap.services.com.example.HelloWorldService.ports.HelloWorld.debugLog = true
</code></pre>
<p>To set it for the whole service, you would set:</p>
<pre class="prettyprint"><code>play.soap.services.com.example.HelloWorldService.debugLog = true
</code></pre>
<p>And to set it globally, you would set:</p>
<pre class="prettyprint"><code>play.soap.debugLog = true
</code></pre>
<h3><a href="#changing-the-address" name="changing-the-address">Changing the address</a></h3>
<p>The address of a port can be set using the <code>address</code> property. For example, to set the address of every port for the <code>HelloWorldService</code>:</p>
<pre class="prettyprint"><code>play.soap.services.com.example.HelloWorldService.address = &quot;http://example.com/helloWorld&quot;
</code></pre>
<h3><a href="#turning-on-the-debug-log" name="turning-on-the-debug-log">Turning on the debug log</a></h3>
<p>The debug log will log the outbound and inbound messages, including HTTP headers, made by the client. An example of this is as follows:</p>
<pre class="prettyprint"><code>16:52:17.953 [pool-1-thread-1] INFO  o.a.c.s.H.HelloWorldPort.HelloWorld - Outbound Message
---------------------------
ID: 1
Address: http://example.com/helloWorld
Encoding: UTF-8
Http-Method: POST
Content-Type: text/xml
Headers: {Accept=[*/*], SOAPAction=[&quot;&quot;]}
Payload: &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;soap:Body&gt;&lt;ns2:sayHello xmlns:ns2=&quot;http://example.com/&quot;&gt;&lt;name&gt;world&lt;/name&gt;&lt;/ns2:sayHello&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;
--------------------------------------
16:52:18.180 [default-workqueue-1] INFO  o.a.c.s.H.HelloWorldPort.HelloWorld - Inbound Message
----------------------------
ID: 1
Response-Code: 200
Encoding: UTF-8
Content-Type: text/xml;charset=UTF-8
Headers: {Content-Length=[204], content-type=[text/xml;charset=UTF-8], Server=[Jetty(8.1.15.v20140411)]}
Payload: &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;soap:Body&gt;&lt;ns2:sayHelloResponse xmlns:ns2=&quot;http://example.com/&quot;&gt;&lt;return&gt;Hello world&lt;/return&gt;&lt;/ns2:sayHelloResponse&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;
--------------------------------------
</code></pre>
<p>The debug log can be turned on using the <code>debugLog</code> property, for example, to turn it on globally:</p>
<pre class="prettyprint"><code>play.soap.debugLog = true
</code></pre>
<p>In combination with the <code>debugLog</code> property, you may need to adjust the logging levels in your Play application. To see the debug log, you need to ensure that <code>org.apache.cxf.services</code> is configured to log at least <code>INFO</code> messages. This can be further refined by supplying the service name, port and service endpoint interface name, for example, <code>org.apache.cxf.services.HelloWorldService</code>.</p>
						</article>

					</div>
				</div>
				<footer class="site-footer">
					<div class="row">
						<div class="small-12 medium-12 large-12 small-centered columns">

							<div class="logos">
								<a class="footer-logo typsafe" href="http://www.lightbend.com"><svg id="lightbend-reverse" class="svg-icon svg-icon-logo-lightbend-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1228 262"><title>lightbend</title><g id="lightbend"><path d="M355,64.6a7.11,7.11,0,1,1,14.22,0V171.16h45.34a6.61,6.61,0,0,1,6.48,6.66,6.45,6.45,0,0,1-6.48,6.48H362a7.19,7.19,0,0,1-7-7.2V64.6Z" style="fill:#fff"/><path d="M447.77,62.08c0-4.5,3.6-7.38,8.1-7.38,4.68,0,8.28,2.88,8.28,7.38v2.34c0,4.32-3.6,7.38-8.28,7.38-4.5,0-8.1-3.06-8.1-7.38V62.08ZM449,97.36a7,7,0,0,1,6.84-7,6.92,6.92,0,0,1,7,7v80.82a6.77,6.77,0,0,1-6.84,7,6.92,6.92,0,0,1-7-7V97.36Z" style="fill:#fff"/><path d="M500.33,202.47a6.41,6.41,0,0,1-3.6-5.76,6.61,6.61,0,0,1,6.3-6.12,5.59,5.59,0,0,1,3.06.9A58.76,58.76,0,0,0,539,201.57c20.52,0,33.84-11.34,33.84-33.12v-11c-8.1,10.8-19.44,19.62-36.54,19.62-22.32,0-43.74-16.74-43.74-43.56v-0.36c0-27.18,21.6-43.92,43.74-43.92,17.46,0,28.8,8.64,36.36,18.72V97.36a6.87,6.87,0,0,1,6.84-7,7,7,0,0,1,7,7V168.1c0,14.4-4.32,25.38-11.88,32.94-8.28,8.28-20.7,12.42-35.46,12.42A72.88,72.88,0,0,1,500.33,202.47Zm72.9-69.12V133c0-19.08-16.56-31.5-34.2-31.5s-32.22,12.24-32.22,31.32v0.36c0,18.72,14.94,31.68,32.22,31.68C556.66,164.86,573.22,152.08,573.22,133.36Z" style="fill:#fff"/><path d="M618.4,59a6.93,6.93,0,1,1,13.86,0v48.42c6.12-10.08,15.84-18.18,31.86-18.18,22.5,0,35.64,15.12,35.64,37.26v51.66a6.93,6.93,0,1,1-13.86,0V129.94c0-17.28-9.36-28.08-25.74-28.08-16,0-27.9,11.7-27.9,29.16v47.16a6.77,6.77,0,0,1-6.84,7,6.92,6.92,0,0,1-7-7V59Z" style="fill:#fff"/><path d="M732.52,159.64V103.48H725a6.31,6.31,0,0,1-6.12-6.12A6.18,6.18,0,0,1,725,91.24h7.56v-22a6.88,6.88,0,0,1,6.84-7,7.15,7.15,0,0,1,7,7v22H770.5a6.34,6.34,0,0,1,6.3,6.12,6.22,6.22,0,0,1-6.3,6.12H746.38v54.36c0,11.34,6.3,15.48,15.66,15.48,4.86,0,7.38-1.26,8.46-1.26a6,6,0,0,1,5.94,5.94,5.79,5.79,0,0,1-4,5.4,35,35,0,0,1-13.68,2.52C743.86,185.92,732.52,178.54,732.52,159.64Z" style="fill:#fff"/><path d="M806.5,59a6.93,6.93,0,1,1,13.86,0V110c7.56-11.16,18.54-20.7,35.64-20.7,22.32,0,44.46,17.64,44.46,48.24v0.36c0,30.42-22,48.42-44.46,48.42-17.28,0-28.44-9.36-35.64-19.8v11.7a6.88,6.88,0,0,1-6.84,7,7,7,0,0,1-7-7V59Zm79.74,79v-0.36c0-22-15.12-36-32.76-36-17.28,0-33.66,14.58-33.66,35.82v0.36c0,21.6,16.38,36,33.66,36C871.48,173.86,886.24,160.54,886.24,138Z" style="fill:#fff"/><path d="M964.9,186.46c-25.56,0-46.44-19.62-46.44-48.42v-0.36c0-26.82,18.9-48.42,44.64-48.42,27.54,0,43.2,22.5,43.2,47.16a6.45,6.45,0,0,1-6.48,6.48H932.5c2,20.16,16.2,31.5,32.76,31.5,11.52,0,20-4.5,26.82-10.8a6,6,0,0,1,10.08,4.32,6,6,0,0,1-2.16,4.5C991.17,180.88,980.74,186.46,964.9,186.46Zm27.54-53.82C991,115.72,981.28,101,962.74,101c-16.2,0-28.44,13.5-30.24,31.68h59.94Z" style="fill:#fff"/><path d="M1029.34,97.36a7,7,0,0,1,6.84-7,6.92,6.92,0,0,1,7,7v10.08c6.12-10.08,15.84-18.18,31.86-18.18,22.5,0,35.64,15.12,35.64,37.26v51.66a6.93,6.93,0,1,1-13.86,0V129.94c0-17.28-9.36-28.08-25.74-28.08-16,0-27.9,11.7-27.9,29.16v47.16a6.77,6.77,0,0,1-6.84,7,6.92,6.92,0,0,1-7-7V97.36Z" style="fill:#fff"/><path d="M1226.61,178.17a6.93,6.93,0,1,1-13.86,0v-12.6c-7.56,11.16-18.54,20.7-35.64,20.7-22.32,0-44.46-17.64-44.46-48.24v-0.36c0-30.42,22.14-48.42,44.46-48.42,17.28,0,28.44,9.36,35.64,19.8V59a6.77,6.77,0,0,1,6.84-7,6.92,6.92,0,0,1,7,7V178.17Zm-79.74-40.68v0.36c0,22,15.3,36,32.76,36,17.28,0,33.66-14.58,33.66-36V137.5c0-21.42-16.38-35.82-33.66-35.82C1161.64,101.68,1146.88,115,1146.88,137.5Z" style="fill:#fff"/></g><g id="icon"><path d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" style="fill:#fff"/><path d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" style="fill:#fff"/></g></svg></a>
							</div>
							<p>© Lightbend Inc.</p>
						</div>
					</div>
				</footer>
			</div>
		</div>

		<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="javascripts/vendor/fastclick.min.js"></script>
		<script type="text/javascript" src="javascripts/foundation.min.js"></script>
		<script type="text/javascript" src="javascripts/main.min.js"></script>

		<style type="text/css">
		@import "lib/prettify/prettify.css";
		</style>
		<script type="text/javascript" charset="utf-8" src="lib/prettify/prettify.js"></script>
		<script type="text/javascript" charset="utf-8" src="lib/prettify/lang-scala.js"></script>
		<script type="text/javascript">
		$(function(){
		window.prettyPrint && prettyPrint()
		});
		</script>

	</body>
</html>
